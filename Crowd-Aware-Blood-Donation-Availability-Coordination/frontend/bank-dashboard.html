<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Bank Dashboard - BloodConnect</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>

<body>
    <!-- Sidebar -->
    <div class="dashboard-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>BloodConnect</h2>
                <span class="user-role">Blood Bank</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" data-section="overview">
                    <span class="icon">üìä</span>
                    Dashboard
                </a>
                <a href="#inventory" class="nav-item" data-section="inventory">
                    <span class="icon">ü©∏</span>
                    Blood Inventory
                </a>
                <a href="#camps" class="nav-item" data-section="camps">
                    <span class="icon">üèïÔ∏è</span>
                    Manage Camps
                </a>
                <a href="#requests" class="nav-item" data-section="requests">
                    <span class="icon">üè•</span>
                    Hospital Requests
                    <span class="badge">5</span>
                </a>
                <a href="#donations" class="nav-item" data-section="donations">
                    <span class="icon">üíâ</span>
                    Donations
                </a>
                <a href="#network" class="nav-item" data-section="network">
                    <span class="icon">üîó</span>
                    Blood Bank Network
                </a>
                <a href="#analytics" class="nav-item" data-section="analytics">
                    <span class="icon">üìà</span>
                    Analytics
                </a>
                <a href="#alerts" class="nav-item" data-section="alerts">
                    <span class="icon">‚ö†Ô∏è</span>
                    Alerts & Notifications
                </a>
            </nav>
            <div class="sidebar-footer">
                <a href="index.html" class="logout-btn">
                    <span class="icon">üö™</span>
                    Logout
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="dashboard-header">
                <div class="header-left">
                    <button class="menu-toggle">‚ò∞</button>
                    <h1 id="page-title">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="user-profile">
                        <img src="images/bank-logo.png" alt="Bank Logo"
                            onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22><rect width=%2240%22 height=%2240%22 fill=%22%23dc3545%22/><text x=%2220%22 y=%2226%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2218%22 font-family=%22Arial%22>BB</text></svg>'">
                        <div>
                            <span class="user-name">City Blood Bank</span>
                            <span class="user-blood">Pollachi</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Overview Section -->
            <section id="overview" class="content-section active">
                <!-- Critical Alerts -->
                <div class="alert-banner critical">
                    <span class="alert-icon">‚ö†Ô∏è</span>
                    <div class="alert-content">
                        <strong>Critical Alert:</strong> O- blood stock below safety level (5 units remaining)
                        <button class="btn-sm btn-light">Send Alert to Donors</button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ü©∏</div>
                        <div class="stat-details">
                            <h3>Total Blood Units</h3>
                            <p class="stat-number">--</p>
                            <span class="stat-change positive">‚Üë 12% from last month</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üíâ</div>
                        <div class="stat-details">
                            <h3>Today's Collections</h3>
                            <p class="stat-number">--</p>
                            <span class="stat-change">Target: 50 units</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üè•</div>
                        <div class="stat-details">
                            <h3>Pending Requests</h3>
                            <p class="stat-number">--</p>
                            <span class="stat-change urgent">--</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-details">
                            <h3>Expiring Soon</h3>
                            <p class="stat-number">--</p>
                            <span class="stat-change">Within 7 days</span>
                        </div>
                    </div>
                </div>

                <!-- Blood Group Stock Overview -->
                <div class="widget">
                    <div class="widget-header">
                        <h3>Blood Group Inventory Status</h3>
                        <button class="btn-secondary btn-sm">View Details</button>
                    </div>
                    <div class="widget-content">
                        <div class="blood-groups-grid">
                            <!-- Dynamic Content Loaded from Database -->
                            <p>Loading inventory...</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-widgets">
                    <!-- Urgent Hospital Requests -->
                    <div class="widget">
                        <div class="widget-header">
                            <h3>Urgent Hospital Requests</h3>
                            <a href="#requests" class="view-all">View All</a>
                        </div>
                        <div class="widget-content">
                            <div class="requests-list">
                                <div class="request-item urgent">
                                    <div class="request-header">
                                        <h4>City Hospital</h4>
                                        <span class="priority-badge emergency">Emergency</span>
                                    </div>
                                    <p><strong>Blood Type:</strong> O-</p>
                                    <p><strong>Units Needed:</strong> 4</p>
                                    <p><strong>Time:</strong> 30 mins ago</p>
                                    <div class="request-actions">
                                        <button class="btn-primary btn-sm">Approve</button>
                                        <button class="btn-secondary btn-sm">View Details</button>
                                    </div>
                                </div>
                                <div class="request-item">
                                    <div class="request-header">
                                        <h4>District Hospital</h4>
                                        <span class="priority-badge high">High Priority</span>
                                    </div>
                                    <p><strong>Blood Type:</strong> A+</p>
                                    <p><strong>Units Needed:</strong> 2</p>
                                    <p><strong>Time:</strong> 2 hours ago</p>
                                    <div class="request-actions">
                                        <button class="btn-primary btn-sm">Approve</button>
                                        <button class="btn-secondary btn-sm">View Details</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Today's Donation Schedule -->
                    <div class="widget">
                        <div class="widget-header">
                            <h3>Today's Donation Schedule</h3>
                            <a href="#donations" class="view-all">View All</a>
                        </div>
                        <div class="widget-content">
                            <div class="schedule-list">
                                <div class="schedule-item">
                                    <span class="time">10:00 AM</span>
                                    <div class="schedule-details">
                                        <p><strong>John Doe</strong> - O+</p>
                                        <span class="status confirmed">Confirmed</span>
                                    </div>
                                </div>
                                <div class="schedule-item">
                                    <span class="time">11:00 AM</span>
                                    <div class="schedule-details">
                                        <p><strong>Sarah Smith</strong> - A+</p>
                                        <span class="status confirmed">Confirmed</span>
                                    </div>
                                </div>
                                <div class="schedule-item">
                                    <span class="time">2:00 PM</span>
                                    <div class="schedule-details">
                                        <p><strong>Mike Johnson</strong> - B+</p>
                                        <span class="status pending">Pending</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Inventory Section -->
            <section id="inventory" class="content-section">
                <div class="inventory-container">
                    <div class="section-header">
                        <h2>Blood Inventory Management</h2>
                        <div class="header-actions">
                            <button class="btn-primary" id="addStockBtn">Add Stock</button>
                            <button class="btn-secondary" id="generateReportBtn">Generate Report</button>
                        </div>
                    </div>

                    <!-- Filters -->
                    <div class="filters-bar">
                        <select class="filter-select">
                            <option value="">All Blood Groups</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                        <select class="filter-select">
                            <option value="">All Status</option>
                            <option value="available">Available</option>
                            <option value="reserved">Reserved</option>
                            <option value="expiring">Expiring Soon</option>
                        </select>
                        <input type="text" placeholder="Search by Bag ID..." class="search-input">
                    </div>

                    <!-- Inventory Table -->
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Bag ID</th>
                                    <th>Blood Group</th>
                                    <th>Volume</th>
                                    <th>Collection Date</th>
                                    <th>Expiry Date</th>
                                    <th>Status</th>
                                    <th>QR Code</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="inventoryTableBody">
                                <!-- Dynamic Content Loaded from Database -->
                                <tr>
                                    <td colspan="8" style="text-align:center;">Loading inventory...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Camps Section -->
            <section id="camps" class="content-section">
                <div class="camps-management-container">
                    <div class="section-header">
                        <h2>Manage Donation Camps</h2>
                        <button class="btn-primary" id="createCampBtn">Create New Camp</button>
                    </div>

                    <!-- Active Camps -->
                    <div class="camps-section">
                        <h3>Active Camps</h3>
                        <div class="camps-grid">
                            <!-- Dynamic Content Loaded from Database -->
                            <p>Loading camps...</p>
                        </div>
                    </div>

                    <!-- Create Camp Form (Hidden by default) -->
                    <div id="createCampForm" class="modal" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Create New Donation Camp</h3>
                                <button class="modal-close">&times;</button>
                            </div>
                            <form class="camp-form">
                                <div class="form-group">
                                    <label>Camp Name *</label>
                                    <input type="text" id="campName" required>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Date *</label>
                                        <input type="date" id="campDate" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Start Time *</label>
                                        <input type="time" id="campStart" required>
                                    </div>
                                    <div class="form-group">
                                        <label>End Time *</label>
                                        <input type="time" id="campEnd" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Location *</label>
                                    <input type="text" id="campLocation" required>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Target Blood Groups</label>
                                        <input type="text" id="campTarget" placeholder="e.g. All or A+, O-">
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">Create Camp</button>
                                    <button type="button" class="btn-secondary modal-close">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Edit Camp Modal -->
                    <div id="editCampModal" class="modal" style="display: none;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Edit Donation Camp</h3>
                                <button class="modal-close"
                                    onclick="document.getElementById('editCampModal').style.display='none'">&times;</button>
                            </div>
                            <form id="editCampForm">
                                <input type="hidden" id="editCampId">
                                <div class="form-group">
                                    <label>Camp Name *</label>
                                    <input type="text" id="editCampName" required>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Date *</label>
                                        <input type="date" id="editCampDate" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Start Time *</label>
                                        <input type="time" id="editCampStart" required>
                                    </div>
                                    <div class="form-group">
                                        <label>End Time *</label>
                                        <input type="time" id="editCampEnd" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Location *</label>
                                    <input type="text" id="editCampLocation" required>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">Save Changes</button>
                                    <button type="button" class="btn-secondary"
                                        onclick="document.getElementById('editCampModal').style.display='none'">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Manage Slots Modal -->
                    <div id="manageSlotsModal" class="modal" style="display: none;">
                        <div class="modal-content" style="max-width: 600px;">
                            <div class="modal-header">
                                <h3>Manage Slots & Bookings</h3>
                                <button class="modal-close"
                                    onclick="document.getElementById('manageSlotsModal').style.display='none'">&times;</button>
                            </div>
                            <div class="modal-body">
                                <h4>Current Appointments</h4>
                                <div class="table-container">
                                    <table class="data-table" style="width: 100%;">
                                        <thead>
                                            <tr>
                                                <th>Donor</th>
                                                <th>Time</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="slotsTableBody">
                                            <!-- Dynamic Slots -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="modal-footer" style="padding: 15px; text-align: right;">
                                <button class="btn-secondary"
                                    onclick="document.getElementById('manageSlotsModal').style.display='none'">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Hospital Requests Section -->
            <section id="requests" class="content-section">
                <div class="requests-container">
                    <h2>Hospital Blood Requests</h2>
                    <div class="requests-tabs">
                        <button class="tab-btn active" data-tab="pending">Pending (5)</button>
                        <button class="tab-btn" data-tab="approved">Approved</button>
                        <button class="tab-btn" data-tab="completed">Completed</button>
                        <button class="tab-btn" data-tab="rejected">Rejected</button>
                    </div>

                    <div class="tab-content active" id="pending">
                        <div class="requests-list">
                            <!-- Dynamic Content Loaded from Database -->
                            <p>Loading requests...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Donations Section -->
            <section id="donations" class="content-section">
                <div class="donations-container">
                    <h2>Donation Records</h2>
                    <div class="filters-bar">
                        <input type="date" class="filter-input">
                        <select class="filter-select">
                            <option>All Blood Groups</option>
                        </select>
                        <input type="text" placeholder="Search donor..." class="search-input">
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Donor Name</th>
                                    <th>Blood Group</th>
                                    <th>Volume</th>
                                    <th>Bag ID</th>
                                    <th>Camp/Walk-in</th>
                                    <th>Certificate</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic Content Loaded from Database -->
                                <tr>
                                    <td colspan="7" style="text-align:center;">Loading donations...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Blood Bank Network Section -->
            <section id="network" class="content-section">
                <div class="network-container">
                    <h2>Blood Bank Network</h2>
                    <p class="subtitle">Connect with other blood banks for emergency stock sharing</p>

                    <div class="network-grid">
                        <!-- Dynamic Content Loaded from Database -->
                        <p>Loading network...</p>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="content-section">
                <div class="analytics-container">
                    <h2>Analytics & Reports</h2>
                    <div class="charts-grid">
                        <div class="chart-card">
                            <h3>Monthly Collection Trend</h3>
                            <div class="chart-placeholder">
                                üìä Chart showing monthly collections
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>Blood Group Distribution</h3>
                            <div class="chart-placeholder">
                                üìä Pie chart showing distribution
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Alerts Section -->
            <section id="alerts" class="content-section">
                <div class="alerts-container">
                    <h2>Alerts & Notifications</h2>
                    <div class="alerts-list">
                        <div class="alert-card critical">
                            <span class="alert-icon">üö®</span>
                            <div class="alert-content">
                                <h4>Critical Stock Level - O-</h4>
                                <p>O- blood stock has fallen to 5 units (minimum threshold: 20 units)</p>
                                <span class="alert-time">5 minutes ago</span>
                                <button class="btn-primary btn-sm">Alert Donors</button>
                            </div>
                        </div>
                        <div class="alert-card warning">
                            <span class="alert-icon">‚ö†Ô∏è</span>
                            <div class="alert-content">
                                <h4>Units Expiring Soon</h4>
                                <p>28 units are expiring within the next 7 days</p>
                                <span class="alert-time">1 hour ago</span>
                                <button class="btn-secondary btn-sm">View List</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Stock Modal -->
    <div id="addStockModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Update Blood Stock</h3>
                <button class="modal-close"
                    onclick="document.getElementById('addStockModal').style.display='none'">&times;</button>
            </div>
            <form id="addStockForm">
                <div class="form-group">
                    <label>Blood Group</label>
                    <select id="stockGroup" required>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantity (Number of Bags)</label>
                    <input type="number" id="stockUnits" min="1" required>
                </div>
                <div class="form-group">
                    <label>Expiry Date (Required if adding)</label>
                    <input type="date" id="stockExpiry">
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Update Stock</button>
                    <button type="button" class="btn-secondary"
                        onclick="document.getElementById('addStockModal').style.display='none'">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/dashboard-common.js"></script>
    <script src="js/bank-dashboard.js"></script>
</body>

</html>